# 脚本管家 (Script Butler)

一个强大的 VS Code 扩展，智能管理和执行项目脚本，支持 npm/pnpm/yarn 等多种包管理器。

## ✨ 功能特性

### 核心功能

- 🔍 **自动检测** - 自动发现工作区中的所有 package.json 文件
- 📦 **多包管理器支持** - 智能检测并支持 npm/pnpm/yarn/yarn-berry
- 📋 **脚本列表** - 在专用侧边栏面板中显示所有项目脚本
- ▶️ **一键执行** - 点击即可在集成终端中运行脚本
- ⭐ **收藏夹** - 标记常用脚本并跨会话持久化，自动同步更新
- 🔎 **搜索过滤** - 按名称或命令实时过滤脚本
- 🏢 **Monorepo 支持** - 处理多个 package.json 文件并分组显示
- 🔄 **自动刷新** - 监视 package.json 更改并自动更新
- 💻 **智能终端** - 重用终端以提高效率

### 用户界面

- 📊 **树形视图** - 清晰的层次结构显示
- 🎯 **上下文菜单** - 右键快速操作
- 💡 **工具提示** - 悬停显示完整命令
- 🔔 **通知** - 操作反馈提示
- ⌨️ **键盘导航** - 完整的键盘支持

## 📦 安装

### 方法 1：从源代码安装（开发测试）

1. 克隆或下载此项目
2. 在 VS Code 中打开项目文件夹
3. 按 `F5` 启动扩展开发主机
4. 在新窗口中打开包含 package.json 的项目

### 方法 2：从 VSIX 安装

```bash
# 打包扩展
npm install -g @vscode/vsce
vsce package

# 安装 .vsix 文件
code --install-extension npm-script-manager-0.0.1.vsix
```

## 🚀 使用方法

### 查看脚本

1. 点击活动栏中的 **NPM 图标** 📦
2. 查看 **脚本列表** 面板中的所有可用脚本
3. 展开文件夹（在 monorepo 中）查看分组脚本

### 运行脚本

**方法 1：** 点击脚本旁边的播放按钮 ▶️  
**方法 2：** 右键点击脚本 → 选择 "运行脚本"  
**方法 3：** 选择脚本后按 `Enter`

脚本将在名为 `NPM: <脚本名称>` 的集成终端中执行。

### 管理收藏夹

**添加到收藏夹：**
- 右键点击脚本 → "添加到收藏夹"
- 脚本将出现在 **收藏夹** 面板中

**从收藏夹移除：**
- 在收藏夹面板中右键点击脚本 → "从收藏夹移除"

收藏夹会自动保存并在 VS Code 会话之间持久化。

### 过滤脚本

1. 点击脚本列表面板中的 **过滤图标** 🔍
2. 输入搜索文本（按名称或命令搜索）
3. 查看过滤后的结果
4. 点击 **清除过滤** ✖️ 按钮显示所有脚本

过滤是实时的且不区分大小写。

### 刷新脚本

- 点击 **刷新按钮** 🔄 重新加载所有脚本
- 或使用命令面板：`NPM 脚本管理器: 刷新脚本`

当您修改 package.json 时，脚本会自动刷新。

## 🎯 Monorepo 支持

扩展自动检测工作区中的多个 package.json 文件并按位置分组：

```
脚本列表
├─ 📁 package.json
│  ├─ dev
│  └─ build
├─ 📁 apps/frontend/package.json
│  ├─ dev
│  └─ test
└─ 📁 apps/backend/package.json
   ├─ start
   └─ test
```

每个组都可以展开/折叠以便于导航。

## ⌨️ 命令

所有命令都可以通过命令面板访问（`Ctrl+Shift+P`）：

| 命令 | 描述 |
|------|------|
| `刷新脚本` | 从 package.json 重新加载所有脚本 |
| `运行脚本` | 执行选定的脚本 |
| `添加到收藏夹` | 将脚本标记为收藏 |
| `从收藏夹移除` | 取消脚本收藏 |
| `过滤脚本` | 打开搜索输入框 |
| `清除过滤` | 移除活动过滤器 |

## 🎨 界面预览

### 单个 package.json

```
NPM 脚本                    🔄 🔍
├─ 📄 dev                   ▶️
├─ 📄 build                 ▶️
├─ 📄 test                  ▶️
└─ 📄 lint                  ▶️

收藏夹
├─ ⭐ dev                   ▶️
└─ ⭐ test                  ▶️
```

### Monorepo 项目

```
NPM 脚本                    🔄 🔍
├─ 📁 package.json
│  ├─ 📄 dev               ▶️
│  └─ 📄 build             ▶️
└─ 📁 apps/frontend/package.json
   ├─ 📄 dev               ▶️
   └─ 📄 test              ▶️
```

## 🔧 要求

- VS Code 版本 1.85.0 或更高
- Node.js 和 npm 已安装
- 工作区中至少有一个 package.json 文件

## 📝 已知问题

目前没有已知问题。如果遇到任何问题，请在 GitHub 上报告。

## 🛠️ 开发

### 设置开发环境

```bash
# 安装依赖
npm install

# 编译 TypeScript
npm run compile

# 或使用监视模式
npm run watch
```

### 调试扩展

1. 在 VS Code 中打开项目
2. 按 `F5` 启动扩展开发主机
3. 在新窗口中测试扩展
4. 进行更改后按 `Ctrl+R` 重新加载

### 打包扩展

```bash
# 安装 vsce
npm install -g @vscode/vsce

# 创建 .vsix 文件
vsce package
```

## 📚 文档

### 用户文档
- **[快速开始指南](./docs/QUICKSTART.md)** - 5 分钟快速上手
- **[功能特性详解](./docs/FEATURES.md)** - 完整功能说明和最佳实践
- **[故障排除指南](./docs/TROUBLESHOOTING.md)** - 常见问题解决方案

### 开发者文档
- **[架构设计](./docs/ARCHITECTURE.md)** - 技术架构和组件设计
- **[开发指南](./docs/DEVELOPMENT.md)** - 开发环境搭建和工作流
- **[文档索引](./docs/INDEX.md)** - 完整文档导航

### 更多文档
查看 **[docs/](./docs/)** 文件夹获取完整文档列表。

## 📄 许可证

MIT 许可证 - 可自由使用、修改和分发

## 🤝 贡献

欢迎贡献！请随时提交问题或拉取请求。

在贡献之前，请阅读：
- [开发指南](./docs/DEVELOPMENT.md) - 了解开发流程和规范
- [架构设计](./docs/ARCHITECTURE.md) - 理解项目架构

## 📞 支持

如有问题或功能请求，请在 GitHub 上创建问题。

遇到问题？查看 [故障排除指南](./docs/TROUBLESHOOTING.md)

---

**享受使用脚本管家！** 🚀

