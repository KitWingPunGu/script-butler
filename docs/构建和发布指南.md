# è„šæœ¬ç®¡å®¶ - æ„å»ºå’Œå‘å¸ƒæŒ‡å—

## ğŸ“‹ ç›®å½•

1. [å‡†å¤‡å·¥ä½œ](#å‡†å¤‡å·¥ä½œ)
2. [æœ¬åœ°æ„å»º](#æœ¬åœ°æ„å»º)
3. [å‘å¸ƒåˆ° Marketplace](#å‘å¸ƒåˆ°-marketplace)
4. [ç§æœ‰éƒ¨ç½²](#ç§æœ‰éƒ¨ç½²)

---

## ğŸ”§ å‡†å¤‡å·¥ä½œ

### 1. æ›´æ–° package.json

ç¡®ä¿ä»¥ä¸‹å­—æ®µå·²æ­£ç¡®å¡«å†™ï¼š

```json
{
  "name": "script-butler",
  "displayName": "è„šæœ¬ç®¡å®¶",
  "description": "æ™ºèƒ½ç®¡ç†å’Œæ‰§è¡Œé¡¹ç›®è„šæœ¬ï¼Œæ”¯æŒ npm/pnpm/yarn ç­‰å¤šç§åŒ…ç®¡ç†å™¨",
  "version": "1.0.0",
  "publisher": "your-publisher-name",  // âš ï¸ éœ€è¦ä¿®æ”¹
  "author": "Your Name",                // âš ï¸ éœ€è¦ä¿®æ”¹
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/your-username/script-butler"  // âš ï¸ éœ€è¦ä¿®æ”¹
  },
  "icon": "resources/icon.png"  // âš ï¸ éœ€è¦å‡†å¤‡å›¾æ ‡
}
```

### 2. å‡†å¤‡å›¾æ ‡

åˆ›å»ºä¸€ä¸ª 128x128 çš„ PNG å›¾æ ‡ï¼š

```bash
# å°†å›¾æ ‡æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•
resources/icon.png
```

### 3. æ·»åŠ  README

ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•æœ‰ `README.md` æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- åŠŸèƒ½ä»‹ç»
- ä½¿ç”¨è¯´æ˜
- æˆªå›¾
- å®‰è£…æ–¹æ³•

### 4. æ·»åŠ  LICENSE

```bash
# åˆ›å»º MIT è®¸å¯è¯æ–‡ä»¶
touch LICENSE
```

---

## ğŸ“¦ æœ¬åœ°æ„å»º

### æ–¹æ³• 1ï¼šä½¿ç”¨ vsce æ‰“åŒ…

#### 1. å®‰è£… vsce

```bash
npm install -g @vscode/vsce
```

#### 2. ç¼–è¯‘ TypeScript

```bash
npm run compile
```

#### 3. æ‰“åŒ…æ‰©å±•

```bash
vsce package
```

è¿™ä¼šç”Ÿæˆä¸€ä¸ª `.vsix` æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š
```
script-butler-1.0.0.vsix
```

#### 4. å®‰è£…æœ¬åœ°æ‰©å±•

**æ–¹æ³• Aï¼šå‘½ä»¤è¡Œå®‰è£…**
```bash
code --install-extension script-butler-1.0.0.vsix
```

**æ–¹æ³• Bï¼šVS Code ç•Œé¢å®‰è£…**
1. æ‰“å¼€ VS Code
2. æŒ‰ `Ctrl+Shift+P`
3. è¾“å…¥ `Extensions: Install from VSIX...`
4. é€‰æ‹©ç”Ÿæˆçš„ `.vsix` æ–‡ä»¶

---

### æ–¹æ³• 2ï¼šä½¿ç”¨ npm scripts

åœ¨ `package.json` ä¸­æ·»åŠ æ„å»ºè„šæœ¬ï¼š

```json
{
  "scripts": {
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "package": "vsce package",
    "publish": "vsce publish"
  }
}
```

ç„¶åè¿è¡Œï¼š

```bash
# ç¼–è¯‘
npm run compile

# æ‰“åŒ…
npm run package
```

---

## ğŸš€ å‘å¸ƒåˆ° VS Code Marketplace

### 1. åˆ›å»º Azure DevOps è´¦å·

1. è®¿é—® https://dev.azure.com
2. ä½¿ç”¨ Microsoft è´¦å·ç™»å½•
3. åˆ›å»ºä¸€ä¸ªç»„ç»‡

### 2. åˆ›å»º Personal Access Token (PAT)

1. ç‚¹å‡»å³ä¸Šè§’çš„ç”¨æˆ·å›¾æ ‡
2. é€‰æ‹© **Security** â†’ **Personal access tokens**
3. ç‚¹å‡» **New Token**
4. è®¾ç½®ï¼š
   - **Name**: VS Code Extension Publishing
   - **Organization**: All accessible organizations
   - **Expiration**: è‡ªå®šä¹‰ï¼ˆå»ºè®® 90 å¤©æˆ–æ›´é•¿ï¼‰
   - **Scopes**: 
     - âœ… **Marketplace** â†’ **Manage**
5. ç‚¹å‡» **Create**
6. **âš ï¸ é‡è¦**ï¼šå¤åˆ¶ç”Ÿæˆçš„ Tokenï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼‰

### 3. åˆ›å»º Publisher

```bash
vsce create-publisher your-publisher-name
```

è¾“å…¥ï¼š
- **Personal Access Token**: ç²˜è´´åˆšæ‰å¤åˆ¶çš„ Token
- **Publisher Name**: å‘å¸ƒè€…åç§°ï¼ˆä¸ package.json ä¸­çš„ publisher ä¸€è‡´ï¼‰
- **Display Name**: æ˜¾ç¤ºåç§°
- **Email**: é‚®ç®±

### 4. ç™»å½• Publisher

```bash
vsce login your-publisher-name
```

è¾“å…¥ Personal Access Tokenã€‚

### 5. å‘å¸ƒæ‰©å±•

```bash
vsce publish
```

æˆ–è€…æŒ‡å®šç‰ˆæœ¬å·ï¼š

```bash
# å‘å¸ƒè¡¥ä¸ç‰ˆæœ¬ (1.0.0 -> 1.0.1)
vsce publish patch

# å‘å¸ƒæ¬¡è¦ç‰ˆæœ¬ (1.0.0 -> 1.1.0)
vsce publish minor

# å‘å¸ƒä¸»è¦ç‰ˆæœ¬ (1.0.0 -> 2.0.0)
vsce publish major
```

### 6. éªŒè¯å‘å¸ƒ

1. è®¿é—® https://marketplace.visualstudio.com/
2. æœç´¢ä½ çš„æ‰©å±•åç§°
3. ç­‰å¾…å‡ åˆ†é’Ÿï¼Œæ‰©å±•ä¼šå‡ºç°åœ¨æœç´¢ç»“æœä¸­

---

## ğŸ¢ ç§æœ‰éƒ¨ç½²

### æ–¹æ³• 1ï¼šé€šè¿‡ .vsix æ–‡ä»¶åˆ†å‘

1. æ‰“åŒ…æ‰©å±•ï¼š
   ```bash
   vsce package
   ```

2. å°† `.vsix` æ–‡ä»¶åˆ†å‘ç»™å›¢é˜Ÿæˆå‘˜

3. å›¢é˜Ÿæˆå‘˜å®‰è£…ï¼š
   ```bash
   code --install-extension script-butler-1.0.0.vsix
   ```

### æ–¹æ³• 2ï¼šé€šè¿‡å†…éƒ¨æœåŠ¡å™¨

1. å°† `.vsix` æ–‡ä»¶ä¸Šä¼ åˆ°å†…éƒ¨æœåŠ¡å™¨

2. åˆ›å»ºå®‰è£…è„šæœ¬ï¼š
   ```bash
   #!/bin/bash
   # install-extension.sh
   
   EXTENSION_URL="https://your-server.com/extensions/script-butler-1.0.0.vsix"
   TEMP_FILE="/tmp/script-butler.vsix"
   
   # ä¸‹è½½æ‰©å±•
   curl -o $TEMP_FILE $EXTENSION_URL
   
   # å®‰è£…æ‰©å±•
   code --install-extension $TEMP_FILE
   
   # æ¸…ç†
   rm $TEMP_FILE
   ```

### æ–¹æ³• 3ï¼šé€šè¿‡ Git ä»“åº“

1. å°†é¡¹ç›®æ¨é€åˆ° Git ä»“åº“

2. å›¢é˜Ÿæˆå‘˜å…‹éš†ä»“åº“ï¼š
   ```bash
   git clone https://your-git-server.com/script-butler.git
   cd script-butler
   ```

3. å®‰è£…ä¾èµ–å¹¶ç¼–è¯‘ï¼š
   ```bash
   npm install
   npm run compile
   ```

4. æ‰“åŒ…å¹¶å®‰è£…ï¼š
   ```bash
   vsce package
   code --install-extension script-butler-1.0.0.vsix
   ```

---

## ğŸ”„ æ›´æ–°æ‰©å±•

### 1. æ›´æ–°ç‰ˆæœ¬å·

åœ¨ `package.json` ä¸­æ›´æ–°ç‰ˆæœ¬å·ï¼š

```json
{
  "version": "1.0.1"
}
```

æˆ–ä½¿ç”¨å‘½ä»¤ï¼š

```bash
npm version patch  # 1.0.0 -> 1.0.1
npm version minor  # 1.0.0 -> 1.1.0
npm version major  # 1.0.0 -> 2.0.0
```

### 2. æ›´æ–° CHANGELOG

åœ¨ `CHANGELOG.md` ä¸­è®°å½•æ›´æ–°å†…å®¹ï¼š

```markdown
## [1.0.1] - 2024-01-15

### Added
- æ–°å¢å·¥ä½œæµå¯¼å…¥åŠŸèƒ½

### Fixed
- ä¿®å¤å·¥ä½œæµä¸æ˜¾ç¤ºçš„é—®é¢˜

### Changed
- ç§»é™¤æ‰§è¡Œæç¤ºæ¶ˆæ¯ï¼Œä¼˜åŒ–ä½“éªŒ
```

### 3. é‡æ–°å‘å¸ƒ

```bash
npm run compile
vsce publish
```

---

## âœ… å‘å¸ƒå‰æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ²¡æœ‰ TypeScript ç¼–è¯‘é”™è¯¯
- [ ] README.md å®Œæ•´ä¸”å‡†ç¡®
- [ ] CHANGELOG.md å·²æ›´æ–°
- [ ] package.json ä¸­çš„ä¿¡æ¯æ­£ç¡®
- [ ] å›¾æ ‡æ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®
- [ ] LICENSE æ–‡ä»¶å­˜åœ¨
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] å·²æµ‹è¯•æ‰“åŒ…çš„ .vsix æ–‡ä»¶

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. vsce å‘½ä»¤æ‰¾ä¸åˆ°

```bash
npm install -g @vscode/vsce
```

### 2. æ‰“åŒ…æ—¶æç¤ºç¼ºå°‘ README

ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•æœ‰ `README.md` æ–‡ä»¶ã€‚

### 3. æ‰“åŒ…æ—¶æç¤ºç¼ºå°‘ LICENSE

åˆ›å»º `LICENSE` æ–‡ä»¶ï¼š

```bash
echo "MIT License" > LICENSE
```

### 4. å›¾æ ‡ä¸æ˜¾ç¤º

ç¡®ä¿ï¼š
- å›¾æ ‡æ–‡ä»¶è·¯å¾„æ­£ç¡®ï¼š`resources/icon.png`
- å›¾æ ‡å°ºå¯¸ä¸º 128x128 åƒç´ 
- å›¾æ ‡æ ¼å¼ä¸º PNG

### 5. å‘å¸ƒå¤±è´¥ï¼š401 Unauthorized

Personal Access Token å¯èƒ½è¿‡æœŸæˆ–æ— æ•ˆï¼Œé‡æ–°åˆ›å»º Token å¹¶ç™»å½•ï¼š

```bash
vsce login your-publisher-name
```

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [VS Code Extension API](https://code.visualstudio.com/api)
- [Publishing Extensions](https://code.visualstudio.com/api/working-with-extensions/publishing-extension)
- [vsce Documentation](https://github.com/microsoft/vscode-vsce)

