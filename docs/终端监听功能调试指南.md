# ç»ˆç«¯ç›‘å¬åŠŸèƒ½è°ƒè¯•æŒ‡å—

## ğŸ” é—®é¢˜æ’æŸ¥æ­¥éª¤

### æ­¥éª¤ 1ï¼šç¡®è®¤é…ç½®å·²å¯ç”¨

#### æ–¹æ³• Aï¼šé€šè¿‡è®¾ç½®ç•Œé¢æ£€æŸ¥

1. æ‰“å¼€è®¾ç½®ï¼ˆ`Ctrl+,`ï¼‰
2. æœç´¢ `scriptButler.enableTerminalMonitoring`
3. ç¡®è®¤å¤é€‰æ¡†å·²å‹¾é€‰

#### æ–¹æ³• Bï¼šé€šè¿‡ settings.json æ£€æŸ¥

1. æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆ`Ctrl+Shift+P`ï¼‰
2. æ‰§è¡Œ "Preferences: Open User Settings (JSON)"
3. æŸ¥æ‰¾ä»¥ä¸‹é…ç½®ï¼š
   ```json
   {
     "scriptButler.enableTerminalMonitoring": true
   }
   ```

**å¦‚æœæ²¡æœ‰æ‰¾åˆ°æˆ–å€¼ä¸º `false`ï¼Œè¯´æ˜é…ç½®æœªå¯ç”¨ã€‚**

---

### æ­¥éª¤ 2ï¼šå¯ç”¨é…ç½®

#### æ–¹æ³• Aï¼šé€šè¿‡å‘½ä»¤é¢æ¿ï¼ˆæ¨èï¼‰

1. æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆ`Ctrl+Shift+P`ï¼‰
2. æœç´¢å¹¶æ‰§è¡Œ "è„šæœ¬ç®¡å®¶: åˆ‡æ¢ç»ˆç«¯ç›‘å¬åŠŸèƒ½"
3. åº”è¯¥çœ‹åˆ°æç¤ºï¼š"ç»ˆç«¯ç›‘å¬åŠŸèƒ½å·²å¯ç”¨ã€‚è¯·é‡æ–°åŠ è½½çª—å£ä»¥ç”Ÿæ•ˆã€‚"
4. ç‚¹å‡»"é‡æ–°åŠ è½½"æŒ‰é’®

#### æ–¹æ³• Bï¼šæ‰‹åŠ¨ä¿®æ”¹ settings.json

1. æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆ`Ctrl+Shift+P`ï¼‰
2. æ‰§è¡Œ "Preferences: Open User Settings (JSON)"
3. æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š
   ```json
   {
     "scriptButler.enableTerminalMonitoring": true
   }
   ```
4. ä¿å­˜æ–‡ä»¶ï¼ˆ`Ctrl+S`ï¼‰
5. é‡æ–°åŠ è½½çª—å£ï¼ˆ`Ctrl+Shift+P` -> "Developer: Reload Window"ï¼‰

---

### æ­¥éª¤ 3ï¼šéªŒè¯æ‰©å±•å·²é‡æ–°åŠ è½½

**é‡è¦ï¼š** ä¿®æ”¹é…ç½®åå¿…é¡»é‡æ–°åŠ è½½çª—å£ï¼Œå¦åˆ™ä¸ä¼šç”Ÿæ•ˆï¼

**é‡æ–°åŠ è½½æ–¹æ³•ï¼š**
1. æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆ`Ctrl+Shift+P`ï¼‰
2. æ‰§è¡Œ "Developer: Reload Window"

**æˆ–è€…ï¼š**
- å…³é—­ VS Code
- é‡æ–°æ‰“å¼€ VS Code

---

### æ­¥éª¤ 4ï¼šæ£€æŸ¥å¯ç”¨é€šçŸ¥

é‡æ–°åŠ è½½çª—å£åï¼Œåº”è¯¥çœ‹åˆ°ä»¥ä¸‹é€šçŸ¥ï¼š

```
â„¹ï¸ è„šæœ¬ç®¡å®¶ï¼šç»ˆç«¯ç›‘å¬åŠŸèƒ½å·²å¯ç”¨ï¼ˆå®éªŒæ€§ï¼‰
```

**å¦‚æœæ²¡æœ‰çœ‹åˆ°é€šçŸ¥ï¼š**
- å¯èƒ½é€šçŸ¥è¢«è‡ªåŠ¨å…³é—­äº†ï¼ˆæ­£å¸¸ï¼‰
- ç»§ç»­ä¸‹ä¸€æ­¥æ£€æŸ¥

---

### æ­¥éª¤ 5ï¼šæ£€æŸ¥å†å²è§†å›¾ä¸­çš„çŠ¶æ€é¡¹

1. æ‰“å¼€"è„šæœ¬ç®¡å®¶"ä¾§è¾¹æ 
2. å±•å¼€"æœ€è¿‘æ‰§è¡Œ"è§†å›¾
3. æŸ¥çœ‹é¡¶éƒ¨çš„çŠ¶æ€é¡¹

**åº”è¯¥çœ‹åˆ°ä»¥ä¸‹ä¹‹ä¸€ï¼š**

#### æƒ…å†µ Aï¼šç­‰å¾… Shell Integration æ¿€æ´»
```
ğŸ‘ï¸â€ğŸ—¨ï¸ ç»ˆç«¯ç›‘å¬                    0/0 ç»ˆç«¯
```
**è¯´æ˜ï¼š** åŠŸèƒ½å·²å¯ç”¨ï¼Œä½†è¿˜æ²¡æœ‰æ‰“å¼€ç»ˆç«¯

#### æƒ…å†µ Bï¼šå·²æœ‰æ”¯æŒçš„ç»ˆç«¯
```
ğŸ‘ï¸ ç»ˆç«¯ç›‘å¬                    1/1 ç»ˆç«¯
```
**è¯´æ˜ï¼š** åŠŸèƒ½å·²å¯ç”¨ï¼Œä¸”æœ‰ 1 ä¸ªç»ˆç«¯æ”¯æŒ Shell Integration

#### æƒ…å†µ Cï¼šåŠŸèƒ½æœªå¯ç”¨
```
ğŸ‘ï¸â€ğŸ—¨ï¸ ç»ˆç«¯ç›‘å¬ï¼ˆå·²ç¦ç”¨ï¼‰          ç‚¹å‡»å¯ç”¨
```
**è¯´æ˜ï¼š** åŠŸèƒ½æœªå¯ç”¨ï¼Œé…ç½®å¯èƒ½æ²¡æœ‰ç”Ÿæ•ˆ

**å¦‚æœçœ‹åˆ°æƒ…å†µ Cï¼Œè¯´æ˜é…ç½®æ²¡æœ‰ç”Ÿæ•ˆï¼Œè¯·é‡æ–°æ‰§è¡Œæ­¥éª¤ 2 å’Œæ­¥éª¤ 3ã€‚**

---

### æ­¥éª¤ 6ï¼šæ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ—¥å¿—

1. æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆ`Ctrl+Shift+P`ï¼‰
2. æ‰§è¡Œ "Developer: Toggle Developer Tools"
3. åˆ‡æ¢åˆ° "Console" æ ‡ç­¾
4. æŸ¥æ‰¾ä»¥ä¸‹æ—¥å¿—ï¼š

**åŠŸèƒ½å·²å¯ç”¨ï¼š**
```
[ScriptButler] Terminal monitoring enabled
```

**åŠŸèƒ½æœªå¯ç”¨ï¼š**
```
[ScriptButler] Terminal monitoring disabled
```

**å¦‚æœçœ‹åˆ° "disabled"ï¼Œè¯´æ˜é…ç½®æ²¡æœ‰ç”Ÿæ•ˆã€‚**

---

### æ­¥éª¤ 7ï¼šæ‰“å¼€ç»ˆç«¯å¹¶ç­‰å¾… Shell Integration æ¿€æ´»

1. æ‰“å¼€é›†æˆç»ˆç«¯ï¼ˆ`Ctrl+\``ï¼‰
2. ç­‰å¾…å‡ ç§’é’Ÿ
3. æŸ¥çœ‹"æœ€è¿‘æ‰§è¡Œ"è§†å›¾ä¸­çš„çŠ¶æ€é¡¹

**åº”è¯¥çœ‹åˆ°ï¼š**
```
ğŸ‘ï¸ ç»ˆç«¯ç›‘å¬                    1/1 ç»ˆç«¯
```

**å¦‚æœä»ç„¶æ˜¾ç¤º `0/0 ç»ˆç«¯`ï¼Œè¯´æ˜ Shell Integration æ²¡æœ‰æ¿€æ´»ã€‚**

---

### æ­¥éª¤ 8ï¼šæ£€æŸ¥ Shell Integration æ˜¯å¦æ¿€æ´»

#### åœ¨å¼€å‘è€…å·¥å…·çš„ Console ä¸­æŸ¥æ‰¾ä»¥ä¸‹æ—¥å¿—ï¼š

**Shell Integration æ¿€æ´»æˆåŠŸï¼š**
```
[TerminalMonitor] Shell integration activated for: <terminal-name>
```

**å¦‚æœæ²¡æœ‰çœ‹åˆ°è¿™æ¡æ—¥å¿—ï¼Œè¯´æ˜ Shell Integration æ²¡æœ‰æ¿€æ´»ã€‚**

#### å¯èƒ½çš„åŸå› ï¼š

1. **ä½¿ç”¨äº†ä¸æ”¯æŒçš„ Shell**
   - âŒ cmd.exeï¼ˆä¸æ”¯æŒï¼‰
   - âœ… PowerShell / pwshï¼ˆæ”¯æŒï¼‰
   - âœ… bashï¼ˆæ”¯æŒï¼‰
   - âœ… zshï¼ˆæ”¯æŒï¼‰
   - âœ… fishï¼ˆæ”¯æŒï¼‰

2. **Shell Integration è¢«ç¦ç”¨**
   - æ£€æŸ¥è®¾ç½®ä¸­çš„ `terminal.integrated.shellIntegration.enabled`
   - åº”è¯¥ä¸º `true`ï¼ˆé»˜è®¤å€¼ï¼‰

3. **Shell é…ç½®å†²çª**
   - æŸäº› Shell é…ç½®å¯èƒ½é˜»æ­¢ Shell Integration æ¿€æ´»
   - ä¾‹å¦‚ï¼šè‡ªå®šä¹‰çš„ PS1 æç¤ºç¬¦

---

### æ­¥éª¤ 9ï¼šæµ‹è¯•å‘½ä»¤æ•è·

1. ç¡®è®¤"æœ€è¿‘æ‰§è¡Œ"è§†å›¾ä¸­çš„çŠ¶æ€é¡¹æ˜¾ç¤ºæœ‰æ”¯æŒçš„ç»ˆç«¯ï¼ˆå¦‚ `1/1 ç»ˆç«¯`ï¼‰
2. åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä¸€ä¸ªè„šæœ¬å‘½ä»¤ï¼š
   ```bash
   npm run dev
   ```
3. æŸ¥çœ‹å¼€å‘è€…å·¥å…·çš„ Console

**åº”è¯¥çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—ï¼š**
```
[TerminalMonitor] Command started in <terminal-name>:
  Command: npm run dev
  Confidence: 2
[TerminalMonitor] Command ended in <terminal-name>:
  Command: npm run dev
  Exit code: 0
  Confidence: 2
[TerminalMonitor] Matched script: dev (npm)
[TerminalMonitor] Recorded script execution: dev
```

4. æŸ¥çœ‹"æœ€è¿‘æ‰§è¡Œ"è§†å›¾

**åº”è¯¥çœ‹åˆ° "dev" è„šæœ¬å‡ºç°åœ¨å†å²ä¸­ã€‚**

---

## ğŸ› å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1ï¼šé…ç½®å¯ç”¨åæ²¡æœ‰çœ‹åˆ°é€šçŸ¥

**å¯èƒ½åŸå› ï¼š**
- é€šçŸ¥è¢«è‡ªåŠ¨å…³é—­
- çª—å£æ²¡æœ‰é‡æ–°åŠ è½½

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥å¼€å‘è€…å·¥å…·çš„ Consoleï¼ŒæŸ¥æ‰¾ `[ScriptButler] Terminal monitoring enabled` æ—¥å¿—
2. æ£€æŸ¥"æœ€è¿‘æ‰§è¡Œ"è§†å›¾ä¸­çš„çŠ¶æ€é¡¹

---

### é—®é¢˜ 2ï¼šçŠ¶æ€é¡¹æ˜¾ç¤º"ç»ˆç«¯ç›‘å¬ï¼ˆå·²ç¦ç”¨ï¼‰"

**å¯èƒ½åŸå› ï¼š**
- é…ç½®æ²¡æœ‰ä¿å­˜
- çª—å£æ²¡æœ‰é‡æ–°åŠ è½½
- é…ç½®ä¿å­˜åœ¨é”™è¯¯çš„ä½ç½®ï¼ˆWorkspace è€Œä¸æ˜¯ Userï¼‰

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ‰“å¼€ User Settings (JSON)
2. ç¡®è®¤ `scriptButler.enableTerminalMonitoring` ä¸º `true`
3. ä¿å­˜æ–‡ä»¶
4. é‡æ–°åŠ è½½çª—å£ï¼ˆ`Developer: Reload Window`ï¼‰

---

### é—®é¢˜ 3ï¼šçŠ¶æ€é¡¹æ˜¾ç¤º `0/0 ç»ˆç«¯`

**å¯èƒ½åŸå› ï¼š**
- è¿˜æ²¡æœ‰æ‰“å¼€ç»ˆç«¯
- Shell Integration æ²¡æœ‰æ¿€æ´»

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ‰“å¼€é›†æˆç»ˆç«¯ï¼ˆ`Ctrl+\``ï¼‰
2. ç­‰å¾…å‡ ç§’é’Ÿ
3. æ£€æŸ¥çŠ¶æ€é¡¹æ˜¯å¦æ›´æ–°ä¸º `1/1 ç»ˆç«¯`

**å¦‚æœä»ç„¶æ˜¯ `0/0`ï¼š**
- æ£€æŸ¥ä½¿ç”¨çš„ Shell æ˜¯å¦æ”¯æŒï¼ˆè§æ­¥éª¤ 8ï¼‰
- æ£€æŸ¥ `terminal.integrated.shellIntegration.enabled` è®¾ç½®

---

### é—®é¢˜ 4ï¼šShell Integration ä¸æ¿€æ´»

**å¯èƒ½åŸå› ï¼š**
- ä½¿ç”¨äº† cmd.exeï¼ˆä¸æ”¯æŒï¼‰
- Shell Integration è¢«ç¦ç”¨
- Shell é…ç½®å†²çª

**è§£å†³æ–¹æ¡ˆï¼š**

#### A. åˆ‡æ¢åˆ°æ”¯æŒçš„ Shell

**Windows ç”¨æˆ·ï¼š**
1. æ‰“å¼€è®¾ç½®ï¼ˆ`Ctrl+,`ï¼‰
2. æœç´¢ `terminal.integrated.defaultProfile.windows`
3. é€‰æ‹© "PowerShell" æˆ– "Git Bash"

**æˆ–è€…åœ¨ settings.json ä¸­ï¼š**
```json
{
  "terminal.integrated.defaultProfile.windows": "PowerShell"
}
```

#### B. å¯ç”¨ Shell Integration

1. æ‰“å¼€è®¾ç½®ï¼ˆ`Ctrl+,`ï¼‰
2. æœç´¢ `terminal.integrated.shellIntegration.enabled`
3. ç¡®è®¤å·²å‹¾é€‰ï¼ˆé»˜è®¤åº”è¯¥æ˜¯å‹¾é€‰çš„ï¼‰

**æˆ–è€…åœ¨ settings.json ä¸­ï¼š**
```json
{
  "terminal.integrated.shellIntegration.enabled": true
}
```

---

### é—®é¢˜ 5ï¼šå‘½ä»¤æ‰§è¡Œäº†ä½†æ²¡æœ‰è®°å½•åˆ°å†å²

**å¯èƒ½åŸå› ï¼š**
- å‘½ä»¤æ ¼å¼ä¸åŒ¹é…
- è„šæœ¬ä¸å­˜åœ¨äº package.json ä¸­
- å‘½ä»¤è¢«æ’é™¤ï¼ˆå¦‚ `npm install`ï¼‰

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ£€æŸ¥å‘½ä»¤æ ¼å¼**
   - âœ… `npm run dev`
   - âœ… `pnpm dev`
   - âœ… `yarn dev`
   - âŒ `npm dev`ï¼ˆé”™è¯¯æ ¼å¼ï¼‰

2. **æ£€æŸ¥è„šæœ¬æ˜¯å¦å­˜åœ¨**
   - æ‰“å¼€ package.json
   - ç¡®è®¤ `scripts` éƒ¨åˆ†æœ‰å¯¹åº”çš„è„šæœ¬

3. **æ£€æŸ¥æ˜¯å¦ä¸ºæ’é™¤çš„å‘½ä»¤**
   - ä»¥ä¸‹å‘½ä»¤ä¸ä¼šè¢«è®°å½•ï¼š
     - `npm install`
     - `npm add`
     - `npm remove`
     - `npm update`
     - `npm init`
     - `npm create`

4. **æŸ¥çœ‹å¼€å‘è€…å·¥å…·çš„ Console**
   - åº”è¯¥çœ‹åˆ° `[TerminalMonitor] Matched script: <script-name>` æ—¥å¿—
   - å¦‚æœæ²¡æœ‰ï¼Œè¯´æ˜å‘½ä»¤æ²¡æœ‰åŒ¹é…æˆåŠŸ

---

## ğŸ“‹ å®Œæ•´çš„è°ƒè¯•æ£€æŸ¥æ¸…å•

ä½¿ç”¨ä»¥ä¸‹æ£€æŸ¥æ¸…å•é€é¡¹æ’æŸ¥ï¼š

- [ ] 1. é…ç½® `scriptButler.enableTerminalMonitoring` å·²è®¾ç½®ä¸º `true`
- [ ] 2. å·²é‡æ–°åŠ è½½çª—å£ï¼ˆ`Developer: Reload Window`ï¼‰
- [ ] 3. å¼€å‘è€…å·¥å…· Console ä¸­çœ‹åˆ° `[ScriptButler] Terminal monitoring enabled` æ—¥å¿—
- [ ] 4. "æœ€è¿‘æ‰§è¡Œ"è§†å›¾ä¸­çš„çŠ¶æ€é¡¹ä¸æ˜¾ç¤º"å·²ç¦ç”¨"
- [ ] 5. å·²æ‰“å¼€é›†æˆç»ˆç«¯
- [ ] 6. ä½¿ç”¨çš„æ˜¯æ”¯æŒçš„ Shellï¼ˆPowerShell/bash/zsh/fishï¼‰
- [ ] 7. `terminal.integrated.shellIntegration.enabled` è®¾ç½®ä¸º `true`
- [ ] 8. çŠ¶æ€é¡¹æ˜¾ç¤ºæœ‰æ”¯æŒçš„ç»ˆç«¯ï¼ˆå¦‚ `1/1 ç»ˆç«¯`ï¼‰
- [ ] 9. å¼€å‘è€…å·¥å…· Console ä¸­çœ‹åˆ° `[TerminalMonitor] Shell integration activated` æ—¥å¿—
- [ ] 10. æ‰§è¡Œè„šæœ¬å‘½ä»¤åï¼ŒConsole ä¸­çœ‹åˆ° `[TerminalMonitor] Matched script` æ—¥å¿—
- [ ] 11. è„šæœ¬å‡ºç°åœ¨"æœ€è¿‘æ‰§è¡Œ"å†å²ä¸­

**å¦‚æœæ‰€æœ‰æ£€æŸ¥é¡¹éƒ½é€šè¿‡ï¼ŒåŠŸèƒ½åº”è¯¥æ­£å¸¸å·¥ä½œã€‚**

---

## ğŸ†˜ ä»ç„¶æ— æ³•è§£å†³ï¼Ÿ

å¦‚æœæŒ‰ç…§ä»¥ä¸Šæ­¥éª¤ä»ç„¶æ— æ³•å¯ç”¨åŠŸèƒ½ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **VS Code ç‰ˆæœ¬**
   - å¸®åŠ© -> å…³äº

2. **æ“ä½œç³»ç»Ÿ**
   - Windows / macOS / Linux

3. **ä½¿ç”¨çš„ Shell**
   - PowerShell / cmd / bash / zsh / fish

4. **å¼€å‘è€…å·¥å…· Console çš„å®Œæ•´æ—¥å¿—**
   - ä»æ‰©å±•æ¿€æ´»å¼€å§‹çš„æ‰€æœ‰æ—¥å¿—

5. **settings.json ä¸­çš„ç›¸å…³é…ç½®**
   ```json
   {
     "scriptButler.enableTerminalMonitoring": ?,
     "terminal.integrated.defaultProfile.windows": ?,
     "terminal.integrated.shellIntegration.enabled": ?
   }
   ```

6. **"æœ€è¿‘æ‰§è¡Œ"è§†å›¾ä¸­çŠ¶æ€é¡¹çš„æ˜¾ç¤ºå†…å®¹**

---

## ğŸ’¡ å¿«é€Ÿæµ‹è¯•è„šæœ¬

å¤åˆ¶ä»¥ä¸‹æ­¥éª¤å¿«é€Ÿæµ‹è¯•åŠŸèƒ½ï¼š

```bash
# 1. å¯ç”¨åŠŸèƒ½
# æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆCtrl+Shift+Pï¼‰
# æ‰§è¡Œï¼šè„šæœ¬ç®¡å®¶: åˆ‡æ¢ç»ˆç«¯ç›‘å¬åŠŸèƒ½
# ç‚¹å‡»"é‡æ–°åŠ è½½"

# 2. æ‰“å¼€å¼€å‘è€…å·¥å…·
# Ctrl+Shift+P -> Developer: Toggle Developer Tools

# 3. æ‰“å¼€ç»ˆç«¯
# Ctrl+`

# 4. ç­‰å¾… 5 ç§’

# 5. æ£€æŸ¥ Console æ˜¯å¦æœ‰ä»¥ä¸‹æ—¥å¿—ï¼š
# [ScriptButler] Terminal monitoring enabled
# [TerminalMonitor] Shell integration activated for: ...

# 6. æ‰§è¡Œæµ‹è¯•å‘½ä»¤
npm run dev

# 7. æ£€æŸ¥ Console æ˜¯å¦æœ‰ä»¥ä¸‹æ—¥å¿—ï¼š
# [TerminalMonitor] Command started in ...
# [TerminalMonitor] Command ended in ...
# [TerminalMonitor] Matched script: dev
# [TerminalMonitor] Recorded script execution: dev

# 8. æ£€æŸ¥"æœ€è¿‘æ‰§è¡Œ"è§†å›¾
# åº”è¯¥çœ‹åˆ° "dev" è„šæœ¬
```

å¦‚æœä»¥ä¸Šä»»ä½•ä¸€æ­¥å¤±è´¥ï¼Œè¯·å‚è€ƒå¯¹åº”çš„é—®é¢˜æ’æŸ¥æ­¥éª¤ã€‚

